# DocRouter

Сервис для сортировки и обработки документов через веб‑интерфейс.

## Запуск

DocRouter запускается только в контейнере Docker.
Скопируйте `env.example` в `.env` и поднимите сервис:

```bash
cp env.example .env
docker compose up --build
```

После старта интерфейс будет доступен по адресу [http://localhost:8000](http://localhost:8000), где можно загружать, просматривать и скачивать документы.

## Настройка

Все настройки выполняются через веб‑интерфейс. При загрузке можно выбрать язык документа для корректного OCR.

Для документов без владельца используется папка с именем по умолчанию `Shared`. Изменить её можно через переменную окружения `GENERAL_FOLDER_NAME` в `.env`.

### Аутентификация

Сервис открыт — загрузка и скачивание файлов не требуют авторизации.

### Хранилище

Все метаданные хранятся в памяти процесса и теряются после перезапуска сервера.

### Подтверждение создания папок

При загрузке документ может потребовать создания новой иерархии папок. В этом
случае сервис возвращает статус `pending` и список отсутствующих директорий в
поле `missing`. После подтверждения пользователь может вызвать
`POST /files/{id}/finalize` с тем же списком и `{"confirm": true}`. Тогда
каталоги будут созданы, файл переместится в нужное место, а статус записи
сменится на `processed`. Если не подтверждать, файл остаётся во временном
каталоге со статусом `pending`.

## API

### Получение списка файлов

`GET /files` — возвращает список файлов. Если нужно принудительно пересканировать выходной каталог, добавьте параметр `?force=1`.

